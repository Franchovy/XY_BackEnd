2020-12-04 10:13:43,932 ERROR: Exception on /upload_image [POST] [in /Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/flask/app.py:1891]
Traceback (most recent call last):
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/flask_login/utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/app/routes.py", line 190, in upload_image
    db.session.commit()
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 163, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1042, in commit
    self.transaction.commit()
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 504, in commit
    self._prepare_impl()
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 483, in _prepare_impl
    self.session.flush()
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2536, in flush
    self._flush(objects)
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2678, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 68, in __exit__
    compat.raise_(
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/sqlalchemy/util/compat.py", line 182, in raise_
    raise exception
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 2644, in _flush
    flush_context.finalize_flush_changes()
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 443, in finalize_flush_changes
    self.session._register_persistent(other)
  File "/Users/maximefranchot/PycharmProjects/XY_Backend/venv/lib/python3.9/site-packages/sqlalchemy/orm/session.py", line 1911, in _register_persistent
    raise exc.FlushError(
sqlalchemy.orm.exc.FlushError: Instance <Image at 0x7fb2a7de38e0> has a NULL identity key.  If this is an auto-generated value, check that the database table allows generation of new primary key values, and that the mapped Column object is configured to expect these generated values.  Ensure also that this flush() is not occurring at an inappropriate time, such as within a load() event.
2020-12-04 10:14:43,996 INFO: Microblog startup [in /Users/maximefranchot/PycharmProjects/XY_Backend/app/__init__.py:56]
